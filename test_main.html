<!doctype html>
<html lang="us">
<head>
<meta charset="utf-8">
<title>DBMod - ER-Diagram Case Tool 4 U</title>
<link href="css/jquery-ui-1.10.3.custom.css" rel="stylesheet">
<link href="css/dbmod.css" rel="stylesheet">
<script src="js/jquery-1.9.1.js"></script>
<script src="js/jquery-ui-1.10.3.custom.js"></script>
<script>
$(function() {
// Storage variable
var allEntities = [];
var allRelationships = [];

// Functions to check inputs
function checkInputVal(val,array){
if(val == ""){return 0}
else{return ($.inArray(val,array))}
}

// Nested Accordion code for the side tool-bar
var parentDivs = $('#nestedAccordion div');
var childDivs = $('#nestedAccordion h3').siblings('div');
$('#nestedAccordion h2').click(function(){
parentDivs.slideUp();
if($(this).next().is(':hidden')){
    $(this).next().slideDown();
}else{
    $(this).next().slideUp();
}
});
$('#nestedAccordion h3').click(function(){
childDivs.slideUp();
if($(this).next().is(':hidden')){
    $(this).next().slideDown();
}else{
    $(this).next().slideUp();
}
});
$( "#nestedAccordion" ).accordion({ collapsible: true, active: false});

// Converting all the buttons to the animated one
$('.a_button').button();

// Adding entities
$('#Add-REntity').click(function(){
if(checkInputVal($("#REName")[0].value,allEntities) == -1){
    allEntities.push($("#REName")[0].value);
    $( "#REName" )[0].value = "";
    $( "#nestedAccordion" ).accordion({ collapsible: true, active: false});}
    
else{$( "#err-dialog" ).dialog();}
});
$('#Add-WEntity').click(function(){
if(checkInputVal($("#WEName")[0].value,allEntities) == -1){
    allEntities.push($("#WEName")[0].value);
    $( "#WEName" )[0].value = "";
    $( "#nestedAccordion" ).accordion({ collapsible: true, active: false});}
else{$( "#err-dialog" ).dialog();}
});

$( "#AttrTypeSet" ).buttonset();
$( document ).tooltip();
// Hover states on the static widgets
$( "#dialog-link, #icons li" ).hover(
    function() {
    $( this ).addClass( "ui-state-hover" );
    },
    function() {
    $( this ).removeClass( "ui-state-hover" );
    }
);
$( "#Add-Attribute-Entity" ).click(function() {
var ops= ['qwerty','asdfgh'];
$( '#tags' ).autocomplete({source: ops});
$( "#dialog" ).dialog();
});

});</script>
</head>

<body>
    <div id="topheader">
    A CS4221 project by P05
    </div>
    <h1 style="color:white">Welcome to DBMod!</h1>
    <p style="color:white">Design your very own ER-diagrams and we will verify them for you!</p>
    <div id="content">
        <div id="sidebar">
            <div id="nestedAccordion">
            <h2>ADD ENTITY</h2>
            <div>
            <h3 class="subheader">Regular Entity</h3>
                <div><input type="text" name="REName" id="REName" title="Name of New Regular Entity">
                <button id="Add-REntity" class="a_button">Add it!</button></div>
            <h3 class="subheader">Weak Entity</h3>
                <div><input type="text" name="WEName" id="WEName" title="Name of New Weak Entity">
                <button id="Add-WEntity" class="a_button">Add it!</button></div>
            <h3 class="subheader">Entity Attribute</h3>
                <div><input type="text" name="EAttrName" id="EAttrName" title="Name of Attribute">
                <button id="Add-Attribute-Entity" class="a_button">Add it!</button></div>                
            </div>
            <h2>ADD RELATIONSHIP</h2>
            <div>
            <h3 class="subheader">Regular Relationship</h3>
            <div><input type="text" name="RRName" id="RRName" title="Name of New Regular Relationship">
            <button class="a_button">Add it!</button></div>
            <h3 class="subheader">ISA Relationship</h3>
            <div><input type="text" name="ISARName" id="ISARName" title="Name of New ISA Relationship">
            <button class="a_button">Add it!</button></div>
            <h3 class="subheader">OP Relationship</h3>
            <div><input type="text" name="OPRName" id="OPRName" title="Name of New OP Relationship">
            <button class="a_button">Add it!</button></div>
            <h3 class="subheader">Decomp Relationship</h3>
            <div><input type="text" name="DRName" id="DRName" title="Name of New Decomp Relationship">
            <button class="a_button">Add it!</button></div>
            <h3 class="subheader">EX Relationship</h3>
            <div><input type="text" name="EXRName" id="EXRName" title="Name of New EX Relationship">
            <button class="a_button">Add it!</button></div>
            <h3 class="subheader">ID Relationship</h3>
            <div><input type="text" name="IDRName" id="IDRName" title="Name of New ID Relationship">
            <button class="a_button">Add it!</button></div>
            <h3 class="subheader">Relationship Attribute</h3>
            <div>
            <input type="text" name="RAttrName" id="RAttrName" title="Name of Attribute">
            <p>to Entity</p>
            <input type="text" name="Link-RName" id="Link-RName"><button>Add it!</button></div>
            </div>
            <h2>DELETE</h2>
            <div>
            <h3>Entity</h3>
            <div>Which one? </div>
            </div>
            </div>
        </div>
        <div id="canvas">

        </div>
    </div>
    <div id="dialog" title="Attach to?" style="display:none;">
    <input id="tags" /><button class="a_button">Attach!</button>
    </div>
    <div id="add-entity-dialog" title="Added Entity" style="display:none;">
    </div>
    <div id="err-dialog" title="Error!" style="display:none;">
    <p>Please check your input!</p>
    </div>
</body>
</html>
